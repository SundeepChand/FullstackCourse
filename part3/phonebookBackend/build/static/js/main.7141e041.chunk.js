(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(36)},36:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),c=t.n(o),l=t(2),u=function(e){return r.a.createElement("li",null,e.record.name," : ",e.record.number,"\xa0\xa0",r.a.createElement("button",{onClick:e.clickHandler},"Delete"))},i=function(e){return r.a.createElement("ol",null,e.records.map((function(n){return r.a.createElement(u,{key:n.id,record:n,clickHandler:function(){e.deleteRecordById(n.id)}})})))},d=function(e){return r.a.createElement("form",null,r.a.createElement("div",null,"Name: ",r.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),r.a.createElement("div",null,"Phone: ",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:e.handleClick},"Add")))},m=function(e){return r.a.createElement("div",null,"Filter: ",r.a.createElement("input",{value:e.searchInput,onChange:e.handleSearchChange}))},s={color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},f=function(e){var n=e.message;return null==n?null:r.a.createElement("div",{style:s},n)},h={color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},g=function(e){var n=e.message;return null==n?null:r.a.createElement("div",{style:h},n)},b=t(3),p=t.n(b),E="/api/persons",w={getAll:function(){return p.a.get(E).then((function(e){return e.data}))},addNew:function(e){return p.a.post(E,e).then((function(e){return e.data}))},deleteRecord:function(e){return p.a.delete("".concat(E,"/").concat(e))},update:function(e,n){return p.a.put("".concat(E,"/").concat(e),n).then((function(e){return e.data}))}};var C=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),u=Object(l.a)(c,2),s=u[0],h=u[1],b=Object(a.useState)(""),p=Object(l.a)(b,2),E=p[0],C=p[1],v=Object(a.useState)(""),y=Object(l.a)(v,2),O=y[0],k=y[1],N=Object(a.useState)(null),S=Object(l.a)(N,2),j=S[0],L=S[1],R=Object(a.useState)(null),x=Object(l.a)(R,2),B=x[0],D=x[1];Object(a.useEffect)((function(){w.getAll().then((function(e){o(e)}))}),[]);var I=t.filter((function(e){return e.name.toLowerCase().includes(O.toLowerCase())})),T=0===I.length?r.a.createElement("p",null,"No results found."):r.a.createElement(i,{records:I,deleteRecordById:function(e){window.confirm("Do you really want to delete the phone record?")&&w.deleteRecord(e).then((function(){console.log("Deleted ".concat(e)),o(t.filter((function(n){return n.id!==e})))})).catch((function(n){D("".concat(t.find((function(n){return n.id===e})).name," has already been deleted.")),o(t.filter((function(n){return n.id!==e}))),setTimeout((function(){D(null)}),2e3)}))}});return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(f,{message:j}),r.a.createElement(g,{message:B}),r.a.createElement(m,{searchInput:O,handleSearchChange:function(e){k(e.target.value),I=t.filter((function(e){return e.name.toLowerCase().includes(O.toLowerCase())}))}}),r.a.createElement("h3",null,"Add New"),r.a.createElement(d,{newName:s,newNumber:E,handleNumberChange:function(e){C(e.target.value)},handleNameChange:function(e){h(e.target.value)},handleClick:function(e){if(e.preventDefault(),""===s||""===E)alert("Please complete the form");else if(-1===t.map((function(e){return e.name.toLowerCase()})).indexOf(s.toLowerCase())){var n={name:s,number:E};console.log("adding note..."),w.addNew(n).then((function(e){console.log("Exec in then"),o(t.concat(e)),L("Successfully added ".concat(s,".")),h(""),C(""),setTimeout((function(){L(null)}),3e3)})).catch((function(e){D(e.response.data.error),h(""),C(""),setTimeout((function(){D(null)}),3e3)}))}else if(window.confirm("".concat(s," already exits.. Do you want to change the number?"))){var a=t[t.map((function(e){return e.name.toLowerCase()})).indexOf(s.toLowerCase())].id,r={name:s,number:E};w.update(a,r).then((function(e){o(t.map((function(n){return n.id===a?e:n}))),console.log(e),L("Successfully updated ".concat(s,".")),setTimeout((function(){L(null)}),3e3)})).catch((function(){D("".concat(s," has already been deleted.")),o(t.filter((function(e){return e.name.toLowerCase()!==s.toLowerCase()}))),setTimeout((function(){D(null)}),2e3)})),h(""),C("")}}}),r.a.createElement("h2",null,"Numbers"),T)};c.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.7141e041.chunk.js.map